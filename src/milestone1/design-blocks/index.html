<!DOCTYPE html>
<html>
<head>
  <title>Blockly DSL for Home Automation</title>
  <script src="https://unpkg.com/blockly/blockly.min.js"></script>
  <link rel="stylesheet" type="text/css" href="css/styles.css">
</head>
<body>

<h1>Home Automation DSL using Blockly</h1>

<div id="blocklyDiv"></div>

<div class="button-row">
    <button onclick="generateCode()">Generate JavaScript</button>
    <button onclick="runCode()">Run JavaScript</button>
    <button onclick="saveCode()">Save Code</button>
    <button onclick="saveBlocks()">Save Blocks</button>
    <button onclick="loadBlocks()">Load Blocks</button>
    <input type="file" id="loadInput" style="display: none;" onchange="loadBlocksFile(event)">
</div>

<div class="output-container">
  <div id="codeDiv" class="output-box"></div>
  <div id="outputDiv" class="output-box"></div>
</div>


<script>
  const toolbox = `
    <xml>
      <category name="Home Automation" colour="120">
        <block type="if_electricity_cost"></block>
        <block type="location_based_activation"></block>
        <block type="schedule_device_activation"></block>
        <block type="turn_off_non_essential"></block>
        <block type="turn_on_essential"></block>
        <block type="smart_plug_control"></block>
      </category>
    </xml>
  `;
  const workspace = Blockly.inject('blocklyDiv', {toolbox: toolbox});

</script>
<script src="js/custom_blocks.js"></script>
<script src="js/code_generator.js"></script>
<script src="js/simulated_backend.js"></script>
<script src="js/block_handler.js"></script>

</body>
</html>
